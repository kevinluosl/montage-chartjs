var fs=require("fs"),path=require("path"),assert=require("assert"),runCount=0,testCount=0,done=!1;["./01-events.js","./02-stream.js","./03-feed.js"].map(require).forEach(function(t){console.log("\nStarting",t.dir,"\n----");var e=path.resolve(__dirname,t.dir);fs.readdirSync(e).filter(RegExp.prototype.test,/^[^\._]/).map(function(t){return path.resolve(e,t)}).map(require).forEach(function(e){runCount++,console.log("Testing:",e.name);var n=!1;t.test(e,function(t,i){assert.ifError(t),assert.deepEqual(e.expected,i,"didn't get expected output"),n?(testCount++,!--runCount&&done&&console.log("Total tests:",testCount)):n=!0})})});var done=!0;