var Montage=require("../../core").Montage,SelfSerializer=Montage.specialize.call(Object,{_malker:{value:null},_visitor:{value:null},_object:{value:null},constructor:{value:function SelfSerializer(){}},initWithMalkerAndVisitorAndObject:{value:function(t,e,i){return this._malker=t,this._visitor=e,this._object=i,this}},getObjectLabel:{value:function(t){return this._visitor.labeler.getObjectLabel(t)}},addObject:{value:function(t){return"object"==typeof t?(this._malker.visit(t),t):void 0}},addObjectReference:{value:function(t){var e=this._visitor.builder,i=this._visitor.labeler,n=i.getObjectLabel(t);return{thisIsAReferenceCreatedByMontageSerializer:!0,reference:e.createObjectReference(n)}}},setProperty:{value:function(t,e,i){var n,a=this._visitor.builder;n=a.top.getProperty("properties"),a.push(n),this._visitor.setProperty(this._malker,t,e,i),a.pop()}},setAllProperties:{value:function(){var t,e=this._visitor.builder;t=e.top.getProperty("properties"),e.push(t),this._visitor.setSerializableObjectProperties(this._malker,this._object),e.pop()}},setUnit:{value:function(t){this._visitor.setObjectCustomUnit(this._malker,this._object,t)}},setAllUnits:{value:function(){this._visitor.setObjectCustomUnits(this._malker,this._object)}}});exports.SelfSerializer=SelfSerializer;