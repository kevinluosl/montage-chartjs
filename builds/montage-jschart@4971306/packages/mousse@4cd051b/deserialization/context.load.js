montageDefine("4cd051b","deserialization/context",{dependencies:["q"],factory:function(t,e){var n=t("q");(function(t){function e(t,e,n){if(this._reviver=e,this._serialization=t,this._objects=Object.create(null),n){this._userObjects=Object.create(null);for(var i in n)this._userObjects[i]=n[i]}}Object.defineProperties(e.prototype,{_objects:{value:null,writable:!0},_userObjects:{value:null,writable:!0},_serialization:{value:null,writable:!0},_reviver:{value:null,writable:!0},setObjectLabel:{value:function(t,e){this._objects[e]=t}},getObject:{value:function(t){var e,i=this._serialization,r=this._reviver,a=this._objects;return t in a?a[t]:t in i?(e=r.reviveRootObject(i[t],this,t),t in a||(a[t]=e),e):n.reject(Error("Object with label '"+t+"' was not found."))}},getObjects:{value:function(){var t,e=this,i=(this._reviver,this._serialization),r=[];for(var a in i)t=this.getObject(a),n.isPromise(t)&&r.push(t);return 0===r.length?n.resolve(this._invokeDidReviveObjects()):n.all(r).then(function(){return e._invokeDidReviveObjects()})}},hasUserObject:{value:function(t){var e=this._userObjects;return e?t in e:!1}},getUserObject:{value:function(t){var e=this._userObjects;return e?e[t]:void 0}},_invokeDidReviveObjects:{value:function(){var t,e=this,i=this._reviver;return"function"==typeof i.didReviveObjects&&(t=i.didReviveObjects(this._objects,this),n.isPromise(t))?t.then(function(){return e._objects}):this._objects}}}),t.Context=e})(e)}});