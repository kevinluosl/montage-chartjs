var Component=require("montage/ui/component").Component,Chart=require("../../chartjs/chart.min");exports.BarChart=Component.specialize({constructor:{value:function(){this.super()}},chartContext:{value:null},chart:{value:null},height:{value:400},width:{value:600},barShowStroke:{set:function(t){this._barShowStroke=t,this.options.barShowStroke=t},get:function(){return this._barShowStroke}},enterDocument:{value:function(t){this.super(t),Chart.defaults.global.responsive=!0,Chart.defaults.global.maintainAspectRatio=!0,this.chartContext=this.element.getContext("2d"),this.drawChart(),this.addRangeAtPathChangeListener("labels",this,"updateChart"),this.addRangeAtPathChangeListener("datasets",this,"updateChart")}},options:{value:{scaleBeginAtZero:!0,scaleShowGridLines:!0,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,barShowStroke:!0,barStrokeWidth:2,barValueSpacing:5,barDatasetSpacing:1,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].lineColor%>"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>'}},updateChart:{value:function(){null!=this.chart&&this.chart.destroy(),this.drawChart()}},labels:{value:null},datasets:{value:null},allData:{value:null},getDatasets:{value:function(){var t={labels:[],datasets:[]};return t.labels=this.labels,t.datasets=this.datasets,t}},drawChart:{value:function(){null!=this.chartContext&&(this.allData=this.getDatasets(),this.allData.labels&&this.allData.datasets&&(this.chart=new Chart(this.chartContext).Bar(this.allData,this.options)))}}});