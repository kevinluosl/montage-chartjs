var Component=require("montage/ui/component").Component,Chart=require("../../chartjs/chart.min");exports.LineChart=Component.specialize({constructor:{value:function(){this.super()}},chart:{value:null},height:{value:300},width:{value:600},labels:{value:null},datasets:{value:null},allData:{value:null},options:{value:{scaleShowGridLines:!0,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,bezierCurve:!0,bezierCurveTension:.4,pointDot:!0,pointDotRadius:4,pointDotStrokeWidth:1,pointHitDetectionRadius:20,datasetStroke:!0,datasetStrokeWidth:2,datasetFill:!0,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].lineColor%>"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>'}},chartData:{value:{}},chartContext:{value:null},enterDocument:{value:function(t){this.super(t),Chart.defaults.global.responsive=!0,Chart.defaults.global.maintainAspectRatio=!0,this.chartContext=this.element.getContext("2d"),this.drawChart(),this.addRangeAtPathChangeListener("labels",this,"updateChart"),this.addRangeAtPathChangeListener("datasets",this,"updateChart")}},exitDocument:{value:function(){this.super()}},drawChart:{value:function(){null!=this.chartContext&&(this.chartData={labels:[],datasets:[]},this.chartData.labels=this.getLabels(),this.chartData.datasets=this.getDatasets(),null!=this.chartData.labels&&"undefined"!=this.chartData.labels&&null!=this.chartData&&"undefined"!=this.chartData&&(this.chart=new Chart(this.chartContext).Line(this.chartData,this.options)))}},getLabels:{value:function(){return this.labels}},getDatasets:{value:function(){return this.datasets}},updateChart:{value:function(){null!=this.chart&&this.chart.destroy(),this.drawChart()}}});