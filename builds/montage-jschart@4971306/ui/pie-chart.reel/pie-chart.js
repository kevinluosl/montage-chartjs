var Component=require("montage/ui/component").Component,Chart=require("../../chartjs/chart.min");exports.PieChart=Component.specialize({constructor:{value:function(){this.super()}},chartContext:{value:null},chart:{value:null},height:{value:400},width:{value:600},pieOrDoughnut:{value:!1},enterDocument:{value:function(t){this.super(t),Chart.defaults.global.responsive=!0,Chart.defaults.global.maintainAspectRatio=!0,this.chartContext=this.element.getContext("2d"),this.drawChart(),this.addRangeAtPathChangeListener("datasets",this,"updateChart")}},options:{value:{segmentShowStroke:!0,segmentStrokeColor:"#fff",segmentStrokeWidth:2,percentageInnerCutout:0,animationSteps:100,animationEasing:"easeOutBounce",animateRotate:!0,animateScale:!1,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<segments.length; i++){%><li><span style="background-color:<%=segments[i].fillColor%>"></span><%if(segments[i].label){%><%=segments[i].label%><%}%></li><%}%></ul>'}},updateChart:{value:function(){null!=this.chart&&this.chart.destroy(),this.drawChart()}},datasets:{value:null},allData:{value:null},getDatasets:{value:function(){return this.datasets}},drawChart:{value:function(){null!=this.chartContext&&(this.allData=this.getDatasets(),null!=this.allData&&"undefined"!=this.allData&&(this.options.percentageInnerCutout=this.pieOrDoughnut?50:0,this.chart=new Chart(this.chartContext).Pie(this.allData,this.options)))}}});